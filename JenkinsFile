pipeline {
    agent any

    stages {
        stage('Read File From Workspace') {
            steps {
                sh 'pwd'
                sh 'ls -log'
            }
        }
        stage('check if File Exist'){
            steps{
                script{
                    def workingDirectory = pwd();
                    def directoryName = workingDirectory + '/src/main/resources';
                    def op = sh(script: "ls /${directoryName} -log",returnStdout: true).trim()
                    def fileNames = op.split(/[\n\s]+/)
                    def files = []
                    fileNames.each { fileName ->
                                            if (fileName && fileName =~ /.*\.json.*/) { // Check if filename is not empty
                                                files.add(fileName)
                                            }

                    files.each{ item ->
                        def path = directoryName + "/" + item
                        def fileData = sh(script: "cat /${path}",returnStdout: true).trim()
                        print(fileData)
                    }
                }
            }
        }
    }
    }
    }

